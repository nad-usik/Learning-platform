{% extends 'base.html' %}
{% include messages %}

{% block content %}

{% include 'teacher_dashboard_navbar.html' %}

{% if messages %}
<div class="alert alert-warning alert-dismissible fade show" role="alert">
	{% for message in messages %}
	{{ message }}
	<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	{% endfor %}
</div>
{% endif %}

{% if call == 'calendar' %}
<div class="container">
	<div class="row">

		<div class="col-md-6">
			<br/><br/>
			<h2>Запланированные</h2>
			<br/><br/>
			<br>
			<table class="table">
				<thead>
				<tr>
					<th>Дата</th>
					<th>Время</th>
					<th>Предмет</th>
					<th>Продолжительность</th>
				</tr>
				</thead>
				<tbody>
				{% for date in dates %}
				{% for lesson in lessons %}
				{% if lesson.date|date:"Y-m-d" == date|date:"Y-m-d" and lesson.is_available == False %}
				<tr>
					<td>{{ lesson.date|date:"d F" }}</td>
					<td>{{ lesson.date|date:"H:i" }}</td>
					<td>{{ lesson.subject.name }}</td>
					<td>{{ lesson.duration }} минут</td>
				</tr>
				{% endif %}
				{% endfor %}
				{% endfor %}
				</tbody>
			</table>
			<br><br><br>
		</div>

		<div class="col-md-6">
			<br/><br/>
			<h2>Доступны для записи</h2>
			<br/><br/>
			<br>
			<table class="table">
				<thead>
				<tr>
					<th>Дата</th>
					<th>Время</th>
					<th>Предмет</th>
					<th>Продолжительность</th>
				</tr>
				</thead>
				<tbody>
				{% for date in dates %}
				{% for lesson in lessons %}
				{% if lesson.date|date:"Y-m-d" == date|date:"Y-m-d" and lesson.is_available %}
				<tr>
					<td>{{ lesson.date|date:"d F" }}</td>
					<td>{{ lesson.date|date:"H:i" }}</td>
					<td>{{ lesson.subject.name }}</td>
					<td>{{ lesson.duration }} минут</td>
				</tr>
				{% endif %}
				{% endfor %}
				{% endfor %}
				</tbody>
			</table>
			<br><br><br>
		</div>


	</div>
</div>
<center>
	<a href="{% url 'add_lesson' %}" class="btn active" role="button" aria-pressed="true">Добавить слот</a>
</center>
<br><br><br>


{% else %}

<div class="container">
	<div class="row">
		<div class="col-md-6">
			<br/><br/>
			{% if is_available %}
			<h2>Запланировано на сегодня</h2>
			<br/><br/>

			<table class="table">
				<thead>
				<tr>
					<th>Время</th>
					<th>Ученик</th>
					<th>Предмет</th>
					<th>Продолжительность</th>
				</tr>
				</thead>
				<tbody>
				{% for lesson in lessons %}
				<tr>
					<td>{% for %}{{}}</td>
					<td>{{ lesson.date|date:"H:i" }}</td>
					<td>{{ lesson.subject.name }}</td>
					<td>{{ lesson.duration }}</td>
				</tr>
				{% endfor %}
				</tbody>
			</table>
			{% else %}
				<h2>Нет запланированных занятий</h2>
			{% endif %}
		</div>
	</div>
</div>

{% endif %}

{% endblock %}
